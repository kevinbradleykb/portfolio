<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kevin Bradley - Interactive 3D Portfolio</title>
    <meta name="description" content="Kevin Bradley - Security Engineer's Interactive 3D Portfolio World">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            cursor: grab;
        }

        body:active {
            cursor: grabbing;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 1s ease;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(0, 255, 65, 0.3);
            border-top: 3px solid #00ff41;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 2rem;
        }

        .loading-text {
            font-size: 1.5rem;
            font-weight: 600;
            background: linear-gradient(135deg, #00ff41, #0091ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .loading-subtitle {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* UI Overlay */
        #ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        /* Welcome Message */
        #welcome-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            pointer-events: auto;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 3rem;
            max-width: 600px;
            opacity: 1;
            transition: all 1s ease;
        }

        #welcome-message.hidden {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8);
            pointer-events: none;
        }

        .welcome-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #00ff41 0%, #0091ff 50%, #ff0080 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(0, 255, 65, 0.5); }
            to { text-shadow: 0 0 30px rgba(0, 255, 65, 0.8); }
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .enter-btn {
            background: linear-gradient(135deg, #2563eb, #1e40af);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(37, 99, 235, 0.4);
        }

        .enter-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(37, 99, 235, 0.6);
        }

        /* Navigation UI */
        #navigation-ui {
            position: absolute;
            top: 2rem;
            left: 2rem;
            pointer-events: auto;
            opacity: 0;
            transition: all 0.5s ease;
        }

        #navigation-ui.visible {
            opacity: 1;
        }

        .nav-zone {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-zone:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(10px);
        }

        .nav-zone.active {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.3), rgba(30, 64, 175, 0.3));
            border-color: #2563eb;
        }

        .nav-icon {
            font-size: 1.5rem;
        }

        .nav-text {
            font-weight: 500;
        }

        /* Controls Help */
        #controls-help {
            position: absolute;
            bottom: 2rem;
            right: 2rem;
            pointer-events: auto;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            opacity: 0;
            transition: all 0.5s ease;
        }

        #controls-help.visible {
            opacity: 1;
        }

        .controls-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #00ff41;
        }

        .control-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .control-key {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.2rem 0.5rem;
            border-radius: 5px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            min-width: 60px;
            text-align: center;
        }

        /* Zone Info Display */
        #zone-info {
            position: absolute;
            top: 50%;
            right: 2rem;
            transform: translateY(-50%);
            pointer-events: auto;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            max-width: 350px;
            opacity: 0;
            transition: all 0.5s ease;
        }

        #zone-info.visible {
            opacity: 1;
        }

        .zone-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #00ff41, #0091ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .zone-description {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .zone-details {
            list-style: none;
        }

        .zone-details li {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .zone-details li::before {
            content: '‚ñ∂';
            position: absolute;
            left: 0;
            color: #00ff41;
        }

        /* WebGL Canvas */
        #webgl-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            #navigation-ui {
                top: 1rem;
                left: 1rem;
                right: 1rem;
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .nav-zone {
                flex: 1;
                min-width: calc(50% - 0.25rem);
                padding: 0.75rem;
                margin-bottom: 0;
            }

            .nav-text {
                font-size: 0.9rem;
            }

            #controls-help {
                bottom: 1rem;
                right: 1rem;
                left: 1rem;
            }

            #zone-info {
                right: 1rem;
                left: 1rem;
                max-width: none;
                top: auto;
                bottom: 6rem;
                transform: none;
            }

            #welcome-message {
                margin: 1rem;
                padding: 2rem;
            }

            .welcome-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Initializing Portfolio World</div>
        <div class="loading-subtitle">Preparing your 3D experience...</div>
    </div>

    <!-- WebGL Canvas -->
    <canvas id="webgl-canvas"></canvas>

    <!-- UI Overlay -->
    <div id="ui-overlay">
        <!-- Welcome Message -->
        <div id="welcome-message">
            <h1 class="welcome-title">Hi, I'm Kevin</h1>
            <p class="welcome-subtitle">Welcome to my interactive 3D portfolio world. Navigate through different zones to explore my experience, projects, and skills in an immersive environment.</p>
            <button class="enter-btn" onclick="enterPortfolio()">Enter Portfolio World</button>
        </div>

        <!-- Navigation UI -->
        <div id="navigation-ui">
            <div class="nav-zone active" data-zone="landing" onclick="navigateToZone('landing')">
                <span class="nav-icon">üè†</span>
                <span class="nav-text">Landing</span>
            </div>
            <div class="nav-zone" data-zone="about" onclick="navigateToZone('about')">
                <span class="nav-icon">üë®‚Äçüíª</span>
                <span class="nav-text">About</span>
            </div>
            <div class="nav-zone" data-zone="experience" onclick="navigateToZone('experience')">
                <span class="nav-icon">üíº</span>
                <span class="nav-text">Experience</span>
            </div>
            <div class="nav-zone" data-zone="projects" onclick="navigateToZone('projects')">
                <span class="nav-icon">üöÄ</span>
                <span class="nav-text">Projects</span>
            </div>
            <div class="nav-zone" data-zone="skills" onclick="navigateToZone('skills')">
                <span class="nav-icon">‚ö°</span>
                <span class="nav-text">Skills</span>
            </div>
        </div>

        <!-- Zone Information -->
        <div id="zone-info">
            <h2 class="zone-title">Landing Zone</h2>
            <p class="zone-description">Welcome to my digital universe! This is your starting point to explore my professional journey through interactive 3D spaces.</p>
            <ul class="zone-details">
                <li>Navigate with mouse/touch controls</li>
                <li>Click zone buttons to travel instantly</li>
                <li>Explore interactive elements in each zone</li>
                <li>Experience my story in a new dimension</li>
            </ul>
        </div>

        <!-- Controls Help -->
        <div id="controls-help">
            <div class="controls-title">Controls</div>
            <div class="control-item">
                <span class="control-key">Mouse</span>
                <span>Look around</span>
            </div>
            <div class="control-item">
                <span class="control-key">WASD</span>
                <span>Move forward/back/left/right</span>
            </div>
            <div class="control-item">
                <span class="control-key">Space</span>
                <span>Move up</span>
            </div>
            <div class="control-item">
                <span class="control-key">Shift</span>
                <span>Move down</span>
            </div>
            <div class="control-item">
                <span class="control-key">Click</span>
                <span>Interact with objects</span>
            </div>
        </div>
    </div>

    <!-- Three.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script>
        // Global Variables
        let scene, camera, renderer, controls;
        let currentZone = 'landing';
        let zoneObjects = {};
        let interactiveObjects = [];
        let raycaster, mouse;
        let isExploring = false;

        // Zone Data
        const zones = {
            landing: {
                title: 'Landing Zone',
                description: 'Welcome to my digital universe! This is your starting point to explore my professional journey through interactive 3D spaces.',
                details: [
                    'Navigate with mouse/touch controls',
                    'Click zone buttons to travel instantly', 
                    'Explore interactive elements in each zone',
                    'Experience my story in a new dimension'
                ],
                position: { x: 0, y: 0, z: 0 },
                color: 0x2563eb
            },
            about: {
                title: 'About Me',
                description: 'Discover my journey from NCAA athlete to cybersecurity professional. Interactive elements reveal my story, interests, and what drives my passion for technology.',
                details: [
                    'Yale graduate with Sociology & Public Health degree',
                    'NCAA All-American swimmer background',
                    'Expertise in cybersecurity and data analysis',
                    'International experience in Shanghai'
                ],
                position: { x: -50, y: 0, z: 0 },
                color: 0x059669
            },
            experience: {
                title: 'Professional Experience',
                description: 'Walk through my career timeline in 3D space. Each position is represented by interactive structures showing my growth and achievements.',
                details: [
                    'Group1001 Security Engineer (Current)',
                    'Horizon Kinetics Equity Research',
                    'ConBio Business Strategy (Shanghai)',
                    'UBS Cyber Threat Intelligence Team'
                ],
                position: { x: 50, y: 0, z: 0 },
                color: 0x0891b2
            },
            projects: {
                title: 'Featured Projects',
                description: 'Explore my technical projects in an interactive showcase. Each project is presented as a 3D structure you can examine and interact with.',
                details: [
                    'Cybersecurity Risk Assessment Framework',
                    'Financial Data Analytics Platform',
                    'UBS Intranet Extension Development',
                    'Interactive project documentation'
                ],
                position: { x: 0, y: 0, z: 50 },
                color: 0x7c3aed
            },
            skills: {
                title: 'Technical Skills',
                description: 'Navigate through my technical expertise visualized as an interactive skill tree. Each branch represents different competencies and certifications.',
                details: [
                    'Cybersecurity & Threat Intelligence',
                    'Data Analysis (R, Python, SQL, Tableau)',
                    'Cloud Technologies & Infrastructure',
                    'Project Management & Team Leadership'
                ],
                position: { x: 0, y: 0, z: -50 },
                color: 0xdc2626
            }
        };

        // Initialize the 3D world
        function init() {
            // Create scene
            scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0x000011, 100, 1000);

            // Create camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 10, 30);

            // Create renderer
            renderer = new THREE.WebGLRenderer({
                canvas: document.getElementById('webgl-canvas'),
                antialias: true,
                alpha: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000011, 1);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;

            // Initialize controls
            initControls();

            // Initialize raycaster for interactions
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            // Create zones
            createZones();

            // Add lights
            addLights();

            // Add particle system
            addParticleSystem();

            // Add starfield
            addStarfield();

            // Event listeners
            window.addEventListener('resize', onWindowResize);
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('click', onMouseClick);

            // Start animation loop
            animate();
        }

        // Controls system
        function initControls() {
            const keys = {
                w: false, a: false, s: false, d: false,
                space: false, shift: false
            };

            document.addEventListener('keydown', (event) => {
                switch(event.code) {
                    case 'KeyW': keys.w = true; break;
                    case 'KeyA': keys.a = true; break;
                    case 'KeyS': keys.s = true; break;
                    case 'KeyD': keys.d = true; break;
                    case 'Space': keys.space = true; event.preventDefault(); break;
                    case 'ShiftLeft': keys.shift = true; break;
                }
            });

            document.addEventListener('keyup', (event) => {
                switch(event.code) {
                    case 'KeyW': keys.w = false; break;
                    case 'KeyA': keys.a = false; break;
                    case 'KeyS': keys.s = false; break;
                    case 'KeyD': keys.d = false; break;
                    case 'Space': keys.space = false; break;
                    case 'ShiftLeft': keys.shift = false; break;
                }
            });

            // Mouse controls
            let isMouseDown = false;
            let mouseX = 0, mouseY = 0;

            document.addEventListener('mousedown', (event) => {
                isMouseDown = true;
                mouseX = event.clientX;
                mouseY = event.clientY;
            });

            document.addEventListener('mouseup', () => {
                isMouseDown = false;
            });

            document.addEventListener('mousemove', (event) => {
                if (!isMouseDown || !isExploring) return;

                const deltaX = event.clientX - mouseX;
                const deltaY = event.clientY - mouseY;

                camera.rotation.y -= deltaX * 0.002;
                camera.rotation.x -= deltaY * 0.002;
                camera.rotation.x = Math.max(-Math.PI/2, Math.min(Math.PI/2, camera.rotation.x));

                mouseX = event.clientX;
                mouseY = event.clientY;
            });

            // Movement update function
            controls = {
                update: () => {
                    if (!isExploring) return;

                    const speed = 0.5;
                    const direction = new THREE.Vector3();
                    
                    if (keys.w) direction.z -= speed;
                    if (keys.s) direction.z += speed;
                    if (keys.a) direction.x -= speed;
                    if (keys.d) direction.x += speed;
                    if (keys.space) direction.y += speed;
                    if (keys.shift) direction.y -= speed;

                    // Apply camera rotation to movement
                    direction.applyEuler(new THREE.Euler(0, camera.rotation.y, 0));
                    camera.position.add(direction);
                }
            };
        }

        // Create different zones
        function createZones() {
            Object.keys(zones).forEach(zoneName => {
                const zone = zones[zoneName];
                const group = new THREE.Group();
                
                // Zone platform
                const platformGeometry = new THREE.CylinderGeometry(20, 20, 2, 32);
                const platformMaterial = new THREE.MeshLambertMaterial({ 
                    color: zone.color,
                    transparent: true,
                    opacity: 0.8
                });
                const platform = new THREE.Mesh(platformGeometry, platformMaterial);
                platform.position.set(zone.position.x, -1, zone.position.z);
                platform.receiveShadow = true;
                group.add(platform);

                // Zone identifier - floating crystal
                const crystalGeometry = new THREE.OctahedronGeometry(3);
                const crystalMaterial = new THREE.MeshPhongMaterial({ 
                    color: zone.color,
                    shininess: 100,
                    transparent: true,
                    opacity: 0.9
                });
                const crystal = new THREE.Mesh(crystalGeometry, crystalMaterial);
                crystal.position.set(zone.position.x, 8, zone.position.z);
                crystal.castShadow = true;
                crystal.userData = { zone: zoneName, type: 'crystal' };
                group.add(crystal);
                interactiveObjects.push(crystal);

                // Zone-specific elements
                if (zoneName === 'landing') {
                    // Welcome portal
                    const ringGeometry = new THREE.TorusGeometry(5, 1, 8, 16);
                    const ringMaterial = new THREE.MeshPhongMaterial({ 
                        color: 0x00ff41,
                        emissive: 0x001100
                    });
                    const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                    ring.position.set(0, 5, 0);
                    ring.rotation.x = Math.PI / 2;
                    group.add(ring);

                    // Floating text elements
                    for (let i = 0; i < 8; i++) {
                        const textCube = new THREE.Mesh(
                            new THREE.BoxGeometry(2, 2, 2),
                            new THREE.MeshPhongMaterial({ color: 0x0091ff })
                        );
                        const angle = (i / 8) * Math.PI * 2;
                        textCube.position.set(
                            Math.cos(angle) * 15,
                            3 + Math.sin(i) * 2,
                            Math.sin(angle) * 15
                        );
                        textCube.userData = { type: 'info', info: 'Welcome to Kevin\'s Portfolio!' };
                        group.add(textCube);
                        interactiveObjects.push(textCube);
                    }
                }

                if (zoneName === 'about') {
                    // Personal timeline towers
                    for (let i = 0; i < 4; i++) {
                        const towerGeometry = new THREE.CylinderGeometry(1, 2, 8 + i * 2, 8);
                        const towerMaterial = new THREE.MeshLambertMaterial({ color: zone.color });
                        const tower = new THREE.Mesh(towerGeometry, towerMaterial);
                        tower.position.set(
                            zone.position.x + (i - 1.5) * 8,
                            (8 + i * 2) / 2,
                            zone.position.z + 10
                        );
                        tower.userData = { 
                            type: 'about', 
                            info: ['Yale Education', 'NCAA Athletics', 'Tech Career', 'Current Role'][i] 
                        };
                        group.add(tower);
                        interactiveObjects.push(tower);
                    }
                }

                if (zoneName === 'experience') {
                    // Career buildings
                    const companies = ['Group1001', 'Horizon Kinetics', 'ConBio', 'UBS'];
                    for (let i = 0; i < companies.length; i++) {
                        const buildingGeometry = new THREE.BoxGeometry(6, 10 + i * 3, 6);
                        const buildingMaterial = new THREE.MeshLambertMaterial({ color: zone.color });
                        const building = new THREE.Mesh(buildingGeometry, buildingMaterial);
                        building.position.set(
                            zone.position.x + (i - 1.5) * 12,
                            (10 + i * 3) / 2,
                            zone.position.z
                        );
                        building.userData = { 
                            type: 'experience', 
                            company: companies[i] 
                        };
                        group.add(building);
                        interactiveObjects.push(building);
                    }
                }

                if (zoneName === 'projects') {
                    // Project showcases
                    const projects = ['Security Framework', 'Analytics Platform', 'Intranet Extension'];
                    for (let i = 0; i < projects.length; i++) {
                        const projectGeometry = new THREE.DodecahedronGeometry(4);
                        const projectMaterial = new THREE.MeshPhongMaterial({ 
                            color: zone.color,
                            wireframe: false,
                            transparent: true,
                            opacity: 0.8
                        });
                        const project = new THREE.Mesh(projectGeometry, projectMaterial);
                        const angle = (i / projects.length) * Math.PI * 2;
                        project.position.set(
                            zone.position.x + Math.cos(angle) * 15,
                            6,
                            zone.position.z + Math.sin(angle) * 15
                        );
                        project.userData = { 
                            type: 'project', 
                            name: projects[i] 
                        };
                        group.add(project);
                        interactiveObjects.push(project);
                    }
                }

                if (zoneName === 'skills') {
                    // Skill trees
                    const skillCategories = ['Cybersecurity', 'Data Analysis', 'Cloud Tech', 'Leadership'];
                    for (let i = 0; i < skillCategories.length; i++) {
                        const treeGroup = new THREE.Group();
                        
                        // Tree trunk
                        const trunkGeometry = new THREE.CylinderGeometry(0.5, 1, 8);
                        const trunkMaterial = new THREE.MeshLambertMaterial({ color: 0x8B4513 });
                        const trunk = new THREE.Mesh(trunkGeometry, trunkMaterial);
                        trunk.position.y = 4;
                        treeGroup.add(trunk);

                        // Tree crown
                        const crownGeometry = new THREE.SphereGeometry(4);
                        const crownMaterial = new THREE.MeshLambertMaterial({ color: zone.color });
                        const crown = new THREE.Mesh(crownGeometry, crownMaterial);
                        crown.position.y = 10;
                        crown.userData = { 
                            type: 'skill', 
                            category: skillCategories[i] 
                        };
                        treeGroup.add(crown);
                        interactiveObjects.push(crown);

                        const angle = (i / skillCategories.length) * Math.PI * 2;
                        treeGroup.position.set(
                            zone.position.x + Math.cos(angle) * 15,
                            0,
                            zone.position.z + Math.sin(angle) * 15
                        );
                        
                        group.add(treeGroup);
                    }
                }

                zoneObjects[zoneName] = group;
                scene.add(group);
            });
        }

        // Add lighting
        function addLights() {
            // Ambient light
            const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
            scene.add(ambientLight);

            // Main directional light
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(50, 50, 50);
            directionalLight.castShadow = true;
            directionalLight.shadow.mapSize.width = 2048;
            directionalLight.shadow.mapSize.height = 2048;
            scene.add(directionalLight);

            // Zone-specific colored lights
            Object.keys(zones).forEach(zoneName => {
                const zone = zones[zoneName];
                const light = new THREE.PointLight(zone.color, 0.5, 50);
                light.position.set(zone.position.x, 15, zone.position.z);
                scene.add(light);
            });
        }

        // Add particle system
        function addParticleSystem() {
            const particleCount = 1000;
            const particles = new THREE.BufferGeometry();
            const positions = new Float32Array(particleCount * 3);

            for (let i = 0; i < particleCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 400;
                positions[i + 1] = (Math.random() - 0.5) * 400;
                positions[i + 2] = (Math.random() - 0.5) * 400;
            }

            particles.setAttribute('position', new THREE.BufferAttribute(positions, 3));

            const particleMaterial = new THREE.PointsMaterial({
                color: 0x00ff41,
                size: 0.5,
                transparent: true,
                opacity: 0.6
            });

            const particleSystem = new THREE.Points(particles, particleMaterial);
            scene.add(particleSystem);
        }

        // Add starfield background
        function addStarfield() {
            const starCount = 2000;
            const stars = new THREE.BufferGeometry();
            const positions = new Float32Array(starCount * 3);

            for (let i = 0; i < starCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 2000;
                positions[i + 1] = (Math.random() - 0.5) * 2000;
                positions[i + 2] = (Math.random() - 0.5) * 2000;
            }

            stars.setAttribute('position', new THREE.BufferAttribute(positions, 3));

            const starMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 1,
                transparent: true,
                opacity: 0.8
            });

            const starField = new THREE.Points(stars, starMaterial);
            scene.add(starField);
        }

        // Mouse interaction functions
        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        function onMouseClick(event) {
            if (!isExploring) return;
            
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(interactiveObjects);

            if (intersects.length > 0) {
                const object = intersects[0].object;
                handleObjectInteraction(object);
            }
        }

        function handleObjectInteraction(object) {
            const userData = object.userData;
            
            if (userData.zone) {
                navigateToZone(userData.zone);
            } else if (userData.type === 'info') {
                alert(userData.info);
            } else if (userData.type === 'about') {
                alert(`About: ${userData.info} - Key milestone in Kevin's journey`);
            } else if (userData.type === 'experience') {
                alert(`Experience at ${userData.company} - Click zone navigation to learn more`);
            } else if (userData.type === 'project') {
                alert(`Project: ${userData.name} - Interactive showcase coming soon`);
            } else if (userData.type === 'skill') {
                alert(`Skill Category: ${userData.category} - Core competency area`);
            }
        }

        // Zone navigation
        function navigateToZone(zoneName) {
            if (!zones[zoneName]) return;

            currentZone = zoneName;
            const zone = zones[zoneName];

            // Update UI
            document.querySelectorAll('.nav-zone').forEach(el => el.classList.remove('active'));
            document.querySelector(`[data-zone="${zoneName}"]`).classList.add('active');

            // Update zone info
            const zoneInfo = document.getElementById('zone-info');
            zoneInfo.querySelector('.zone-title').textContent = zone.title;
            zoneInfo.querySelector('.zone-description').textContent = zone.description;
            
            const detailsList = zoneInfo.querySelector('.zone-details');
            detailsList.innerHTML = '';
            zone.details.forEach(detail => {
                const li = document.createElement('li');
                li.textContent = detail;
                detailsList.appendChild(li);
            });

            // Animate camera to zone
            animateCameraToPosition(
                zone.position.x,
                zone.position.y + 15,
                zone.position.z + 25
            );
        }

        function animateCameraToPosition(x, y, z) {
            const startPos = camera.position.clone();
            const endPos = new THREE.Vector3(x, y, z);
            const duration = 2000;
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = 1 - Math.pow(1 - progress, 3); // Ease out cubic

                camera.position.lerpVectors(startPos, endPos, eased);

                if (progress < 1) {
                    requestAnimationFrame(animate);
                }
            }

            animate();
        }

        // UI Functions
        function enterPortfolio() {
            document.getElementById('welcome-message').classList.add('hidden');
            document.getElementById('navigation-ui').classList.add('visible');
            document.getElementById('controls-help').classList.add('visible');
            document.getElementById('zone-info').classList.add('visible');
            isExploring = true;
        }

        // Window resize handler
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            // Update controls
            if (controls && controls.update) {
                controls.update();
            }

            // Rotate crystals
            interactiveObjects.forEach(obj => {
                if (obj.userData.type === 'crystal') {
                    obj.rotation.y += 0.01;
                    obj.position.y = 8 + Math.sin(Date.now() * 0.002) * 2;
                }
            });

            // Render scene
            renderer.render(scene, camera);
        }

        // Initialize everything when page loads
        window.addEventListener('load', () => {
            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loading-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loading-screen').style.display = 'none';
                }, 1000);
            }, 2000);

            // Initialize 3D world
            init();
        });
    </script>
</body>
</html>